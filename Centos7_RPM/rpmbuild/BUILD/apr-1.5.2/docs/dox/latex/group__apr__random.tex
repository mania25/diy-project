\hypertarget{group__apr__random}{\section{Random Functions}
\label{group__apr__random}\index{Random Functions@{Random Functions}}
}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structapr__crypto__hash__t}{apr\-\_\-crypto\-\_\-hash\-\_\-t}
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__apr__random_ga30fbaf80424a9f1a0e9cc51072f65127}{typedef struct \hyperlink{structapr__crypto__hash__t}{apr\-\_\-crypto\-\_\-hash\-\_\-t} {\bfseries apr\-\_\-crypto\-\_\-hash\-\_\-t}}\label{group__apr__random_ga30fbaf80424a9f1a0e9cc51072f65127}

\item 
\hypertarget{group__apr__random_gad2775bc1cdb376d9dec0e97283b4bdd9}{typedef void {\bfseries apr\-\_\-crypto\-\_\-hash\-\_\-init\-\_\-t} (\hyperlink{structapr__crypto__hash__t}{apr\-\_\-crypto\-\_\-hash\-\_\-t} $\ast$hash)}\label{group__apr__random_gad2775bc1cdb376d9dec0e97283b4bdd9}

\item 
\hypertarget{group__apr__random_ga2f8a4fb18078a76357327ea55936c1ea}{typedef void {\bfseries apr\-\_\-crypto\-\_\-hash\-\_\-add\-\_\-t} (\hyperlink{structapr__crypto__hash__t}{apr\-\_\-crypto\-\_\-hash\-\_\-t} $\ast$hash, const void $\ast$data, apr\-\_\-size\-\_\-t bytes)}\label{group__apr__random_ga2f8a4fb18078a76357327ea55936c1ea}

\item 
\hypertarget{group__apr__random_gab70ea9133870efdb5532d20d4bcf7442}{typedef void {\bfseries apr\-\_\-crypto\-\_\-hash\-\_\-finish\-\_\-t} (\hyperlink{structapr__crypto__hash__t}{apr\-\_\-crypto\-\_\-hash\-\_\-t} $\ast$hash, unsigned char $\ast$result)}\label{group__apr__random_gab70ea9133870efdb5532d20d4bcf7442}

\item 
typedef struct \hyperlink{group__apr__random_ga33073741e56b1bafe52ba58cefcbbf96}{apr\-\_\-random\-\_\-t} \hyperlink{group__apr__random_ga33073741e56b1bafe52ba58cefcbbf96}{apr\-\_\-random\-\_\-t}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__apr__errno_gaf76ee4543247e9fb3f3546203e590a6c}{apr\-\_\-status\-\_\-t} \hyperlink{group__apr__random_ga564e4c380e820a9b0d9e877d4852a65e}{apr\-\_\-generate\-\_\-random\-\_\-bytes} (unsigned char $\ast$buf, apr\-\_\-size\-\_\-t length)
\item 
\hyperlink{structapr__crypto__hash__t}{apr\-\_\-crypto\-\_\-hash\-\_\-t} $\ast$ \hyperlink{group__apr__random_gae992c6f642e9661d2417cd8f2df8d345}{apr\-\_\-crypto\-\_\-sha256\-\_\-new} (\hyperlink{group__apr__pools_gaf137f28edcf9a086cd6bc36c20d7cdfb}{apr\-\_\-pool\-\_\-t} $\ast$p)
\item 
void \hyperlink{group__apr__random_ga0184a90774212132f883c463811aacdc}{apr\-\_\-random\-\_\-init} (\hyperlink{group__apr__random_ga33073741e56b1bafe52ba58cefcbbf96}{apr\-\_\-random\-\_\-t} $\ast$g, \hyperlink{group__apr__pools_gaf137f28edcf9a086cd6bc36c20d7cdfb}{apr\-\_\-pool\-\_\-t} $\ast$p, \hyperlink{structapr__crypto__hash__t}{apr\-\_\-crypto\-\_\-hash\-\_\-t} $\ast$pool\-\_\-hash, \hyperlink{structapr__crypto__hash__t}{apr\-\_\-crypto\-\_\-hash\-\_\-t} $\ast$key\-\_\-hash, \hyperlink{structapr__crypto__hash__t}{apr\-\_\-crypto\-\_\-hash\-\_\-t} $\ast$prng\-\_\-hash)
\item 
\hyperlink{group__apr__random_ga33073741e56b1bafe52ba58cefcbbf96}{apr\-\_\-random\-\_\-t} $\ast$ \hyperlink{group__apr__random_ga7a73c9bcf026b63847aeae483c53191f}{apr\-\_\-random\-\_\-standard\-\_\-new} (\hyperlink{group__apr__pools_gaf137f28edcf9a086cd6bc36c20d7cdfb}{apr\-\_\-pool\-\_\-t} $\ast$p)
\item 
void \hyperlink{group__apr__random_ga8cf2875644c1dffc0c336289bd370efb}{apr\-\_\-random\-\_\-add\-\_\-entropy} (\hyperlink{group__apr__random_ga33073741e56b1bafe52ba58cefcbbf96}{apr\-\_\-random\-\_\-t} $\ast$g, const void $\ast$entropy\-\_\-, apr\-\_\-size\-\_\-t bytes)
\item 
\hyperlink{group__apr__errno_gaf76ee4543247e9fb3f3546203e590a6c}{apr\-\_\-status\-\_\-t} \hyperlink{group__apr__random_gab9a63359bb9543d746e6fd46933b7256}{apr\-\_\-random\-\_\-insecure\-\_\-bytes} (\hyperlink{group__apr__random_ga33073741e56b1bafe52ba58cefcbbf96}{apr\-\_\-random\-\_\-t} $\ast$g, void $\ast$random, apr\-\_\-size\-\_\-t bytes)
\item 
\hyperlink{group__apr__errno_gaf76ee4543247e9fb3f3546203e590a6c}{apr\-\_\-status\-\_\-t} \hyperlink{group__apr__random_ga9f0607e06656a1c76cc5ee878fd94f09}{apr\-\_\-random\-\_\-secure\-\_\-bytes} (\hyperlink{group__apr__random_ga33073741e56b1bafe52ba58cefcbbf96}{apr\-\_\-random\-\_\-t} $\ast$g, void $\ast$random, apr\-\_\-size\-\_\-t bytes)
\item 
void \hyperlink{group__apr__random_ga37d8d7529cf972c605ebce97c57f8825}{apr\-\_\-random\-\_\-barrier} (\hyperlink{group__apr__random_ga33073741e56b1bafe52ba58cefcbbf96}{apr\-\_\-random\-\_\-t} $\ast$g)
\item 
\hyperlink{group__apr__errno_gaf76ee4543247e9fb3f3546203e590a6c}{apr\-\_\-status\-\_\-t} \hyperlink{group__apr__random_ga99d0c0722eeef2951e8ccede2e1451fa}{apr\-\_\-random\-\_\-secure\-\_\-ready} (\hyperlink{group__apr__random_ga33073741e56b1bafe52ba58cefcbbf96}{apr\-\_\-random\-\_\-t} $\ast$r)
\item 
\hyperlink{group__apr__errno_gaf76ee4543247e9fb3f3546203e590a6c}{apr\-\_\-status\-\_\-t} \hyperlink{group__apr__random_ga6465698bdc752d07abc8c515aac6e2c0}{apr\-\_\-random\-\_\-insecure\-\_\-ready} (\hyperlink{group__apr__random_ga33073741e56b1bafe52ba58cefcbbf96}{apr\-\_\-random\-\_\-t} $\ast$r)
\item 
void \hyperlink{group__apr__random_gaa1ab9b8adeeb6e37bb29def249ff9e6a}{apr\-\_\-random\-\_\-after\-\_\-fork} (\hyperlink{structapr__proc__t}{apr\-\_\-proc\-\_\-t} $\ast$proc)
\end{DoxyCompactItemize}


\subsection{Detailed Description}


\subsection{Typedef Documentation}
\hypertarget{group__apr__random_ga33073741e56b1bafe52ba58cefcbbf96}{\index{Random Functions@{Random Functions}!apr\-\_\-random\-\_\-t@{apr\-\_\-random\-\_\-t}}
\index{apr\-\_\-random\-\_\-t@{apr\-\_\-random\-\_\-t}!Random Functions@{Random Functions}}
\subsubsection[{apr\-\_\-random\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf apr\-\_\-random\-\_\-t} {\bf apr\-\_\-random\-\_\-t}}}\label{group__apr__random_ga33073741e56b1bafe52ba58cefcbbf96}
Opaque P\-R\-N\-G structure. 

\subsection{Function Documentation}
\hypertarget{group__apr__random_gae992c6f642e9661d2417cd8f2df8d345}{\index{Random Functions@{Random Functions}!apr\-\_\-crypto\-\_\-sha256\-\_\-new@{apr\-\_\-crypto\-\_\-sha256\-\_\-new}}
\index{apr\-\_\-crypto\-\_\-sha256\-\_\-new@{apr\-\_\-crypto\-\_\-sha256\-\_\-new}!Random Functions@{Random Functions}}
\subsubsection[{apr\-\_\-crypto\-\_\-sha256\-\_\-new}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\-\_\-crypto\-\_\-hash\-\_\-t}$\ast$ apr\-\_\-crypto\-\_\-sha256\-\_\-new (
\begin{DoxyParamCaption}
\item[{{\bf apr\-\_\-pool\-\_\-t} $\ast$}]{p}
\end{DoxyParamCaption}
)}}\label{group__apr__random_gae992c6f642e9661d2417cd8f2df8d345}
Allocate and initialize the S\-H\-A-\/256 context 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
\end{DoxyParams}
\hypertarget{group__apr__random_ga564e4c380e820a9b0d9e877d4852a65e}{\index{Random Functions@{Random Functions}!apr\-\_\-generate\-\_\-random\-\_\-bytes@{apr\-\_\-generate\-\_\-random\-\_\-bytes}}
\index{apr\-\_\-generate\-\_\-random\-\_\-bytes@{apr\-\_\-generate\-\_\-random\-\_\-bytes}!Random Functions@{Random Functions}}
\subsubsection[{apr\-\_\-generate\-\_\-random\-\_\-bytes}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\-\_\-status\-\_\-t} apr\-\_\-generate\-\_\-random\-\_\-bytes (
\begin{DoxyParamCaption}
\item[{unsigned char $\ast$}]{buf, }
\item[{apr\-\_\-size\-\_\-t}]{length}
\end{DoxyParamCaption}
)}}\label{group__apr__random_ga564e4c380e820a9b0d9e877d4852a65e}
Generate random bytes. 
\begin{DoxyParams}{Parameters}
{\em buf} & Buffer to fill with random bytes \\
\hline
{\em length} & Length of buffer in bytes \\
\hline
\end{DoxyParams}
\hypertarget{group__apr__random_ga8cf2875644c1dffc0c336289bd370efb}{\index{Random Functions@{Random Functions}!apr\-\_\-random\-\_\-add\-\_\-entropy@{apr\-\_\-random\-\_\-add\-\_\-entropy}}
\index{apr\-\_\-random\-\_\-add\-\_\-entropy@{apr\-\_\-random\-\_\-add\-\_\-entropy}!Random Functions@{Random Functions}}
\subsubsection[{apr\-\_\-random\-\_\-add\-\_\-entropy}]{\setlength{\rightskip}{0pt plus 5cm}void apr\-\_\-random\-\_\-add\-\_\-entropy (
\begin{DoxyParamCaption}
\item[{{\bf apr\-\_\-random\-\_\-t} $\ast$}]{g, }
\item[{const void $\ast$}]{entropy\-\_\-, }
\item[{apr\-\_\-size\-\_\-t}]{bytes}
\end{DoxyParamCaption}
)}}\label{group__apr__random_ga8cf2875644c1dffc0c336289bd370efb}
Mix the randomness pools. 
\begin{DoxyParams}{Parameters}
{\em g} & The P\-R\-N\-G state \\
\hline
{\em entropy\-\_\-} & Entropy buffer \\
\hline
{\em bytes} & Length of entropy\-\_\- in bytes \\
\hline
\end{DoxyParams}
\hypertarget{group__apr__random_gaa1ab9b8adeeb6e37bb29def249ff9e6a}{\index{Random Functions@{Random Functions}!apr\-\_\-random\-\_\-after\-\_\-fork@{apr\-\_\-random\-\_\-after\-\_\-fork}}
\index{apr\-\_\-random\-\_\-after\-\_\-fork@{apr\-\_\-random\-\_\-after\-\_\-fork}!Random Functions@{Random Functions}}
\subsubsection[{apr\-\_\-random\-\_\-after\-\_\-fork}]{\setlength{\rightskip}{0pt plus 5cm}void apr\-\_\-random\-\_\-after\-\_\-fork (
\begin{DoxyParamCaption}
\item[{{\bf apr\-\_\-proc\-\_\-t} $\ast$}]{proc}
\end{DoxyParamCaption}
)}}\label{group__apr__random_gaa1ab9b8adeeb6e37bb29def249ff9e6a}
Mix the randomness pools after forking. 
\begin{DoxyParams}{Parameters}
{\em proc} & The resulting process handle from \hyperlink{group__apr__thread__proc_ga3d0415bf69b0a629a929833e82758b85}{apr\-\_\-proc\-\_\-fork()} \\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
Call this in the child after forking to mix the randomness pools. Note that its generally a bad idea to fork a process with a real P\-R\-N\-G in it -\/ better to have the P\-R\-N\-G externally and get the randomness from there. However, if you really must do it, then you should supply all your entropy to all the P\-R\-N\-Gs -\/ don't worry, they won't produce the same output. 

Note that \hyperlink{group__apr__thread__proc_ga3d0415bf69b0a629a929833e82758b85}{apr\-\_\-proc\-\_\-fork()} calls this for you, so only weird applications need ever call it themselves. 
\end{DoxyRemark}
\hypertarget{group__apr__random_ga37d8d7529cf972c605ebce97c57f8825}{\index{Random Functions@{Random Functions}!apr\-\_\-random\-\_\-barrier@{apr\-\_\-random\-\_\-barrier}}
\index{apr\-\_\-random\-\_\-barrier@{apr\-\_\-random\-\_\-barrier}!Random Functions@{Random Functions}}
\subsubsection[{apr\-\_\-random\-\_\-barrier}]{\setlength{\rightskip}{0pt plus 5cm}void apr\-\_\-random\-\_\-barrier (
\begin{DoxyParamCaption}
\item[{{\bf apr\-\_\-random\-\_\-t} $\ast$}]{g}
\end{DoxyParamCaption}
)}}\label{group__apr__random_ga37d8d7529cf972c605ebce97c57f8825}
Ensures that E bits of conditional entropy are mixed into the P\-R\-N\-G before any further randomness is extracted. 
\begin{DoxyParams}{Parameters}
{\em g} & The R\-N\-G state \\
\hline
\end{DoxyParams}
\hypertarget{group__apr__random_ga0184a90774212132f883c463811aacdc}{\index{Random Functions@{Random Functions}!apr\-\_\-random\-\_\-init@{apr\-\_\-random\-\_\-init}}
\index{apr\-\_\-random\-\_\-init@{apr\-\_\-random\-\_\-init}!Random Functions@{Random Functions}}
\subsubsection[{apr\-\_\-random\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void apr\-\_\-random\-\_\-init (
\begin{DoxyParamCaption}
\item[{{\bf apr\-\_\-random\-\_\-t} $\ast$}]{g, }
\item[{{\bf apr\-\_\-pool\-\_\-t} $\ast$}]{p, }
\item[{{\bf apr\-\_\-crypto\-\_\-hash\-\_\-t} $\ast$}]{pool\-\_\-hash, }
\item[{{\bf apr\-\_\-crypto\-\_\-hash\-\_\-t} $\ast$}]{key\-\_\-hash, }
\item[{{\bf apr\-\_\-crypto\-\_\-hash\-\_\-t} $\ast$}]{prng\-\_\-hash}
\end{DoxyParamCaption}
)}}\label{group__apr__random_ga0184a90774212132f883c463811aacdc}
Initialize a P\-R\-N\-G state 
\begin{DoxyParams}{Parameters}
{\em g} & The P\-R\-N\-G state \\
\hline
{\em p} & The pool to allocate from \\
\hline
{\em pool\-\_\-hash} & Pool hash functions \\
\hline
{\em key\-\_\-hash} & Key hash functions \\
\hline
{\em prng\-\_\-hash} & P\-R\-N\-G hash functions \\
\hline
\end{DoxyParams}
\hypertarget{group__apr__random_gab9a63359bb9543d746e6fd46933b7256}{\index{Random Functions@{Random Functions}!apr\-\_\-random\-\_\-insecure\-\_\-bytes@{apr\-\_\-random\-\_\-insecure\-\_\-bytes}}
\index{apr\-\_\-random\-\_\-insecure\-\_\-bytes@{apr\-\_\-random\-\_\-insecure\-\_\-bytes}!Random Functions@{Random Functions}}
\subsubsection[{apr\-\_\-random\-\_\-insecure\-\_\-bytes}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\-\_\-status\-\_\-t} apr\-\_\-random\-\_\-insecure\-\_\-bytes (
\begin{DoxyParamCaption}
\item[{{\bf apr\-\_\-random\-\_\-t} $\ast$}]{g, }
\item[{void $\ast$}]{random, }
\item[{apr\-\_\-size\-\_\-t}]{bytes}
\end{DoxyParamCaption}
)}}\label{group__apr__random_gab9a63359bb9543d746e6fd46933b7256}
Generate cryptographically insecure random bytes. 
\begin{DoxyParams}{Parameters}
{\em g} & The R\-N\-G state \\
\hline
{\em random} & Buffer to fill with random bytes \\
\hline
{\em bytes} & Length of buffer in bytes \\
\hline
\end{DoxyParams}
\hypertarget{group__apr__random_ga6465698bdc752d07abc8c515aac6e2c0}{\index{Random Functions@{Random Functions}!apr\-\_\-random\-\_\-insecure\-\_\-ready@{apr\-\_\-random\-\_\-insecure\-\_\-ready}}
\index{apr\-\_\-random\-\_\-insecure\-\_\-ready@{apr\-\_\-random\-\_\-insecure\-\_\-ready}!Random Functions@{Random Functions}}
\subsubsection[{apr\-\_\-random\-\_\-insecure\-\_\-ready}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\-\_\-status\-\_\-t} apr\-\_\-random\-\_\-insecure\-\_\-ready (
\begin{DoxyParamCaption}
\item[{{\bf apr\-\_\-random\-\_\-t} $\ast$}]{r}
\end{DoxyParamCaption}
)}}\label{group__apr__random_ga6465698bdc752d07abc8c515aac6e2c0}
Return A\-P\-R\-\_\-\-S\-U\-C\-C\-E\-S\-S if the P\-R\-N\-G has been seeded with enough data, A\-P\-R\-\_\-\-E\-N\-O\-T\-E\-N\-O\-U\-G\-H\-E\-N\-T\-R\-O\-P\-Y otherwise. 
\begin{DoxyParams}{Parameters}
{\em r} & The P\-R\-N\-G state \\
\hline
\end{DoxyParams}
\hypertarget{group__apr__random_ga9f0607e06656a1c76cc5ee878fd94f09}{\index{Random Functions@{Random Functions}!apr\-\_\-random\-\_\-secure\-\_\-bytes@{apr\-\_\-random\-\_\-secure\-\_\-bytes}}
\index{apr\-\_\-random\-\_\-secure\-\_\-bytes@{apr\-\_\-random\-\_\-secure\-\_\-bytes}!Random Functions@{Random Functions}}
\subsubsection[{apr\-\_\-random\-\_\-secure\-\_\-bytes}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\-\_\-status\-\_\-t} apr\-\_\-random\-\_\-secure\-\_\-bytes (
\begin{DoxyParamCaption}
\item[{{\bf apr\-\_\-random\-\_\-t} $\ast$}]{g, }
\item[{void $\ast$}]{random, }
\item[{apr\-\_\-size\-\_\-t}]{bytes}
\end{DoxyParamCaption}
)}}\label{group__apr__random_ga9f0607e06656a1c76cc5ee878fd94f09}
Generate cryptographically secure random bytes. 
\begin{DoxyParams}{Parameters}
{\em g} & The R\-N\-G state \\
\hline
{\em random} & Buffer to fill with random bytes \\
\hline
{\em bytes} & Length of buffer in bytes \\
\hline
\end{DoxyParams}
\hypertarget{group__apr__random_ga99d0c0722eeef2951e8ccede2e1451fa}{\index{Random Functions@{Random Functions}!apr\-\_\-random\-\_\-secure\-\_\-ready@{apr\-\_\-random\-\_\-secure\-\_\-ready}}
\index{apr\-\_\-random\-\_\-secure\-\_\-ready@{apr\-\_\-random\-\_\-secure\-\_\-ready}!Random Functions@{Random Functions}}
\subsubsection[{apr\-\_\-random\-\_\-secure\-\_\-ready}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\-\_\-status\-\_\-t} apr\-\_\-random\-\_\-secure\-\_\-ready (
\begin{DoxyParamCaption}
\item[{{\bf apr\-\_\-random\-\_\-t} $\ast$}]{r}
\end{DoxyParamCaption}
)}}\label{group__apr__random_ga99d0c0722eeef2951e8ccede2e1451fa}
Return A\-P\-R\-\_\-\-S\-U\-C\-C\-E\-S\-S if the cryptographic P\-R\-N\-G has been seeded with enough data, A\-P\-R\-\_\-\-E\-N\-O\-T\-E\-N\-O\-U\-G\-H\-E\-N\-T\-R\-O\-P\-Y otherwise. 
\begin{DoxyParams}{Parameters}
{\em r} & The R\-N\-G state \\
\hline
\end{DoxyParams}
\hypertarget{group__apr__random_ga7a73c9bcf026b63847aeae483c53191f}{\index{Random Functions@{Random Functions}!apr\-\_\-random\-\_\-standard\-\_\-new@{apr\-\_\-random\-\_\-standard\-\_\-new}}
\index{apr\-\_\-random\-\_\-standard\-\_\-new@{apr\-\_\-random\-\_\-standard\-\_\-new}!Random Functions@{Random Functions}}
\subsubsection[{apr\-\_\-random\-\_\-standard\-\_\-new}]{\setlength{\rightskip}{0pt plus 5cm}{\bf apr\-\_\-random\-\_\-t}$\ast$ apr\-\_\-random\-\_\-standard\-\_\-new (
\begin{DoxyParamCaption}
\item[{{\bf apr\-\_\-pool\-\_\-t} $\ast$}]{p}
\end{DoxyParamCaption}
)}}\label{group__apr__random_ga7a73c9bcf026b63847aeae483c53191f}
Allocate and initialize (apr\-\_\-crypto\-\_\-sha256\-\_\-new) a new P\-R\-N\-G state. 
\begin{DoxyParams}{Parameters}
{\em p} & The pool to allocate from \\
\hline
\end{DoxyParams}
